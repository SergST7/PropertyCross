//@ngInject
function myCtrl1(e,r,t){e.data=t.currentItem,e.back=function(){r.path("/search-results")},angular.isUndefined(e.data.datasource_name)&&r.path("/search-form")}
//@ngInject
function myCtrl(e,r,t,a,o){e.data={errorMessage:null,city:"",loader:!1},e.clearError=function(){e.data.errorMessage=null,e.data.city=""},e.onSubmit=function(){e.data.loader=!0,a.getData(e.city).success(function(e){o.data=e.response,console.log(o.data),t.path("/search-results")}).error(function(){e.data.errorMessage="There was a problem with your search"})["finally"](function(){e.data.loader=!1})}}myCtrl1.$inject=["$scope","$location","dataService"],myCtrl.$inject=["$scope","$http","$location","networkService","dataService"],angular.module("myApp",["ngMessages","ngRoute"]).config(["$routeProvider",function(e){e.when("/search-form",{templateUrl:"app/search_form/search_form.template.html",controller:"searchController"}).when("/search-results",{templateUrl:"app/search_results/search_results.template.html",controller:"searchResultsController"}).when("/property-listing",{templateUrl:"app/property_listing/property_listing.template.html",controller:"propertyListingController"}).otherwise({redirectTo:"/search-form"})}]),angular.module("myApp").controller("propertyListingController",myCtrl1),angular.module("myApp").controller("searchController",myCtrl),angular.module("myApp").controller("searchResultsController",["$scope","$location","dataService",function(e,r,t){e.data=t.data,e.back=function(){r.path("/search-form")},e.data?angular.isUndefined(e.data.listings)&&(e.errorMessage="Sorry, no results were found"):e.back(),e.currentItemView=function(e){t.currentItem=e,console.log(e),r.path("/property-listing")}}]),angular.module("myApp").service("dataService",function(){this.data=null,this.currentItem=null}),angular.module("myApp").service("networkService",["$http",function(e){this.getData=function(r){return e({method:"GET",url:"http://api.nestoria.co.uk/api?country=uk&pretty=1&action=search_listings&encoding=json&listing_type=buy&page=1&place_name="+r})}}]);